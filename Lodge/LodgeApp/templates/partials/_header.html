{% load static %}

<!-- ======= Header ======= -->
<header id="header" class="header fixed-top d-flex align-items-center">
  <div class="d-flex align-items-center justify-content-between">
    <a href="{% url 'dashboard' %}" class="logo d-flex align-items-center">
      <img src="{% static 'img/Icon-bg.png' %}" alt="" class="d-lg-none d-lg-block" />
      <span class="d-none d-lg-block">LodgeIt</span>
    </a>
    <i class="bi bi-list toggle-sidebar-btn"></i>
  </div>
  <!-- End Logo -->

  <nav class="header-nav ms-auto">
    <ul class="d-flex align-items-center">
      <li class="nav-item pe-3">
        <!-- Basic Modal -->
        <button
          type="button"
          class="btn btn-outline-dark"
          data-bs-toggle="modal"
          data-bs-target="#basicModal"
        >
          <i class="bi bi-check-circle me-1"></i> Check-in a Guest
        </button>
        <!-- End Basic Modal-->
      </li>
      <!-- End Check in guest button-->
    </ul>
  </nav>
  <!-- End Icons Navigation -->
</header>
<!-- End Header -->

<div class="modal fade" id="basicModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header card-header">
        <div class="text-center"></div>
        <div class="d-flex justify-content-center text-center">
          <a
            href="{% url 'dashboard' %}"
            class="logo d-flex align-items-center w-auto"
          >
            <img src="{% static 'img/Icon-bg.png' %}" alt="" />
          </a>
          <h5 class="card-title text-center pb-0 fs-4">Check-in a guest</h5>
        </div>
        <!-- End Logo -->
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <!-- Default Tabs -->
        <ul class="nav nav-tabs-bordered d-flex" id="myTabjustified" role="tablist">
          <li class="nav-item flex-fill" role="presentation">
            <button class="nav-link w-100 active" id="new-guest-tab" data-bs-toggle="tab" data-bs-target="#new-guest-justified" type="button" role="tab" aria-controls="new-guest" aria-selected="true">New Guest</button>
          </li>
          <li class="nav-item flex-fill" role="presentation">
            <button class="nav-link w-100" id="check-in-tab" data-bs-toggle="tab" data-bs-target="#check-in-justified" type="button" role="tab" aria-controls="returning-guest" aria-selected="false">Returning Guest</button>
          </li>
        </ul>
        <div class="tab-content pt-2" id="myTabjustifiedContent">
          <div class="tab-pane fade show active" id="new-guest-justified" role="tabpanel" aria-labelledby="new-guest-tab">
            <p class="text-center small">Fill in the guest information here</p>
            <form
              class="row g-3 needs-validation"
              novalidate
              method="post"
              action="{% url 'check-in' %}"
            >
              {% csrf_token %}
              <div class="col-12">
                <label for="yourName" class="form-label">Name</label>
                <input
                  type="text"
                  name="name"
                  class="form-control"
                  id="yourName"
                  required
                />
                <div class="invalid-feedback">Please, enter your name!</div>
              </div>

              <div class="col-12">
                <label for="yourEmail" class="form-label">Email</label>
                <input
                  type="email"
                  name="email"
                  class="form-control"
                  id="yourEmail"
                  required
                />
                <div class="invalid-feedback">
                  Please enter a valid Email adddress!
                </div>
              </div>

              <div class="col-12">
                <label for="inputNumber" class="form-label">Phone number</label>
                <input
                  type="number"
                  name="phone"
                  class="form-control"
                  id=""
                  required
                />
                <div class="invalid-feedback">
                  Please, enter a valid mobile number!
                </div>
              </div>

              <div class="col-12">
                <label for="inputNumber" class="form-label">Room number</label>
                <select name="room" class="form-control" id="" required>
                  <option value="">Choose a room</option>
                  {% for room in available_rooms %}
                  <option value="{{room.id}}">
                    Room {{room.room_number}} - {{room.suite.type}} Suite
                  </option>
                  {% endfor %}
                </select>
                <div class="invalid-feedback">Please, choose a room!</div>
              </div>

              <div class="col-12">
                <label for="inputNumber" class="form-label">Length of Stay</label>
                <input
                  type="number"
                  name="duration"
                  min="1"
                  class="form-control"
                  id=""
                  required
                />
                <div class="invalid-feedback">
                  Please, enter the length of the guest's stay!
                </div>
              </div>

              <div class="modal-footer">
                <div class="col-12">
                  <button class="btn btn-dark w-100" type="submit">
                    Check in
                  </button>
                </div>
              </div>
            </form> 
          </div>
          <div class="tab-pane fade" id="check-in-justified" role="tabpanel" aria-labelledby="check-in-tab">
            <div class="container-search">
              <div class="select-box">
                <div class="options-container">
                  
                  {% for guest in guests %}
                  <div class="option">
                    <input type="radio" class="radio" id="{{guest.name}}" name="category" />
                    <label for="{{guest.name}}"><span>#{{guest.id}} ~ </span>{{guest.name}}</label>
                    <input type="text" class="radio breadcrumb-item" id="{{guest.id}}" name="category" value= "{{guest.name}}"/>
                    <input type="text" class="radio breadcrumb-item" id="{{guest.email}}" name="category" value= "{{guest.email}}"/>
                    <input type="text" class="radio breadcrumb-item" id="{{guest.number}}" name="category" value= "{{guest.number}}"/>
                    
                  </div>
                  {% endfor %}
                </div>

                <div class="selected-guest breadcrumb" style="">
                  <i class="bi bi-search me-1"></i> Click here to search
                </div>
    
                <div class="search-box">
                  <input type="text" placeholder="Search..." />
                </div>
                <form
                  class="returning-form row g-3 needs-validation"
                  novalidate
                  method="post"
                  action="{% url 'check-in' %}"
                >
                  {% csrf_token %}
                  <div class="col-12">
                    <label for="yourName" class="form-label">Name</label>
                    <input
                      type="text"
                      name="name_"
                      class="form-control"
                      id="registeredName"
                      
                      readonly
                    />
                  </div>

                  <div class="col-12">
                    <label for="yourEmail" class="form-label">Email</label>
                    <input
                      type="email"
                      name="email_"
                      class="form-control"
                      id="registeredEmail"
                      
                      readonly
                    />
                  </div>

                  <div class="col-12">
                    <label for="inputNumber" class="form-label">Phone number</label>
                    <input
                      type="number"
                      name="phone_"
                      class="form-control"
                      id="inputNumber"
                      
                      readonly
                    />
                  </div>
              
                  <div class="col-12">
                    <label for="inputNumber" class="form-label">Room number</label>
                    <select name="room_" class="form-control" id="" required>
                      <option value="">Choose a room</option>
                      {% for room in available_rooms %}
                      <option value="{{room.id}}">
                        Room {{room.room_number}} - {{room.suite.type}} Suite
                      </option>
                      {% endfor %}
                    </select>
                    <div class="invalid-feedback">Please, choose a room!</div>
                  </div>

                  <div class="col-12">
                    <label for="inputNumber" class="form-label">Length of Stay</label>
                    <input
                      type="number"
                      name="duration_"
                      min="1"
                      class="form-control"
                      id=""
                      required
                    />
                    <div class="invalid-feedback">
                      Please, enter the length of the guest's stay!
                    </div>
                  </div>

                  <div class="modal-footer">
                    <div class="col-12">
                      <button class="btn btn-dark w-100" type="submit">
                        Check in
                      </button>
                    </div>
                  </div>
                </form> 
                
              </div>
            </div>
          </div>
            


      
            <form id="nameForm">
              
            </form>
          </div>
        </div><!-- End Default Tabs -->
      </div>
    </div>
  </div>
</div>

<script src="{% static 'js/check-in.js' %}"></script>
